[default]
exten => s,1,Answer(1)
	same => n,Set(CALLERID(num)=13115552368)
	same => n,Set(CALLERID(name)=Bell Labs)
	same => n,Set(CALLERID(pres)=prohib_not_screened)
	same => n,Originate(Local/0@orig-dest,exten,orig-dest,1,1,,av(mytestvar=42))
	same => n,Originate(Local/0@orig-dest,exten,orig-dest,2,1,,av(__mytestvar=24))
	same => n,Originate(Local/0@orig-dest,exten,orig-dest,3,1,,av(bunny=bear^dog=cat^mytestvar=ice-cream))
	same => n,Originate(Local/0@orig-dest,exten,orig-dest,4,1,,av(fish=salmon^CALLERID(num)=${CALLERID(num)}^arctic=polar_bear))
	same => n,Originate(Local/0@orig-dest,exten,orig-dest,5,1,,av(CALLERID(pres)=${CALLERID(pres)}^CALLERID(name)=${CALLERID(name)}))
	same => n,Originate(Local/0@orig-dest,exten,orig-dest,6,1,,av(CALLERID(pres)=${CALLERID(pres)}^CALLERID(name)=${CALLERID(name)}))
	same => n,Originate(Local/7@orig-dest,app,Wait,2,,,acn)
	same => n,Originate(Local/8@orig-dest,app,Wait,2,,,ac(18005551212)n(Directory Assis))
	same => n,GotoIf($["${ORIGINATE_STATUS}"="SUCCESS"]?orig-dest,pass,1:orig-dest,fail,1)

[orig-dest]
exten => 0,1,Answer(1)
	same => n,Wait(2)
	same => n,Hangup()
exten => 1,1,GotoIf($["${mytestvar}"="42"]?pass,1:fail,1)
exten => 2,1,GotoIf($["${mytestvar}"="24"]?pass,1:fail,1)
exten => 3,1,GotoIf($["${mytestvar}"="ice-cream"]?pass,1:fail,1)
exten => 4,1,GotoIf($["${CALLERID(num)}"="13115552368"]?pass,1:fail,1)
exten => 5,1,GotoIf($["${CALLERID(name)}"="Bell Labs"]?pass,1:fail,1)
exten => 6,1,GotoIf($["${CALLERID(pres)}"="prohib_not_screened"]?pass,1:fail,1)
exten => 7,1,GotoIf($["${CALLERID(num)}"!="13115552368"]?fail,1)
	same => n,GotoIf($["${CALLERID(name)}"="Bell Labs"]?pass,1:fail,1)
exten => 8,1,GotoIf($["${CALLERID(num)}"!="18005551212"]?fail,1)
	same => n,GotoIf($["${CALLERID(name)}"="Directory Assis"]?pass,1:fail,1)
exten => pass,1,Answer(1)
	same => n,UserEvent(OriginateVariableSet,Result: Pass)
	same => n,Hangup()
exten => fail,1,Answer(1)
	same => n,UserEvent(OriginateVariableSet,Result: Fail ${ORIGINATE_STATUS},Reason: ${mytestvar})
	same => n,Hangup()