[default]
exten => user1,1,Answer()
	same => n,ConfBridge(test123)
	same => n,GotoIf($["${CONFBRIDGE_RESULT}"="KICKED"]?pass,1:fail,1)
exten => user2,1,Answer()
	same => n,Set(GLOBAL(test123user)=${CHANNEL})
	same => n,ConfBridge(test123)
	same => n,GotoIf($["${CONFBRIDGE_RESULT}"="KICKED"]?pass,1:fail,1)
exten => user3,1,Answer()
	same => n,ConfBridge(test123)
	same => n,GotoIf($["${CONFBRIDGE_RESULT}"="KICKED"]?pass,1:fail,1)
exten => admin,1,Answer()
	same => n,Set(CONFBRIDGE(user,admin)=yes)
	same => n,ConfBridge(test123)
	same => n,GotoIf($["${CONFBRIDGE_RESULT}"="KICKED"]?pass,1:fail,1)
exten => kicker,1,Answer(1)
	same => n,ExecIf($[${CONFBRIDGE_INFO(parties,test123)}=4]?UserEvent(ConfKickSuccess,Result: Pass):UserEvent(ConfKickSuccess,Result: Fail,Reason: ${CONFBRIDGE_INFO(parties,test123)}))
	same => n,ConfKick(test123,${test123user})
	same => n,Wait(0.1)
	same => n,ExecIf($[${CONFBRIDGE_INFO(parties,test123)}=3]?UserEvent(ConfKickSuccess,Result: Pass):UserEvent(ConfKickSuccess,Result: Fail,Reason: ${CONFBRIDGE_INFO(parties,test123)}))
	same => n,ConfKick(test123,participants)
	same => n,Wait(0.1)
	same => n,ExecIf($[${CONFBRIDGE_INFO(parties,test123)}=1]?UserEvent(ConfKickSuccess,Result: Pass):UserEvent(ConfKickSuccess,Result: Fail,Reason: ${CONFBRIDGE_INFO(parties,test123)}))
	same => n,ConfKick(test123,all)
	same => n,Wait(0.1)
	same => n,ExecIf($[${CONFBRIDGE_INFO(parties,test123)}=0]?UserEvent(ConfKickSuccess,Result: Pass):UserEvent(ConfKickSuccess,Result: Fail,Reason: ${CONFBRIDGE_INFO(parties,test123)}))
	same => n,Hangup()
exten => fail,1,UserEvent(ConfBridgeKick,Result: Fail,Reason: ${CONFBRIDGE_RESULT})
	same => n,Hangup()
exten => pass,1,UserEvent(ConfBridgeKick,Result: Pass)
	same => n,Hangup()
